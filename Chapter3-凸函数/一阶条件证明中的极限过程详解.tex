\documentclass[12pt,a4paper]{article}
\usepackage[UTF8]{ctex}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{geometry}
\geometry{left=2.5cm,right=2.5cm,top=2.5cm,bottom=2.5cm}

\title{一阶条件证明中的极限过程详解}
\subtitle{从 $\frac{f(x + \theta(y - x)) - f(x)}{\theta}$ 到 $f'(x)(y - x)$}
\author{}
\date{\today}

\begin{document}

\maketitle

\section{问题提出}

在证明凸函数的一阶条件时，我们从：

\begin{equation}
\frac{f(x + \theta(y - x)) - f(x)}{\theta} \leq f(y) - f(x)
\end{equation}

通过令 $\theta \to 0$，得到左边趋于 $f'(x)(y - x)$。

\textbf{问题}：这个极限过程是如何进行的？为什么左边会趋于 $f'(x)(y - x)$？

\section{导数的定义回顾}

\subsection{一元函数的导数}

\textbf{导数定义}：函数 $f: \mathbb{R} \to \mathbb{R}$ 在点 $x$ 处的导数定义为：

\begin{equation}
f'(x) = \lim_{h \to 0} \frac{f(x + h) - f(x)}{h}
\end{equation}

\textbf{含义}：
\begin{itemize}
\item $h$ 是自变量的增量
\item $f(x + h) - f(x)$ 是函数值的增量
\item 导数 $f'(x)$ 是增量比的极限
\item 表示函数在点 $x$ 处的瞬时变化率
\end{itemize}

\subsection{方向导数}

\textbf{方向导数}：对于函数 $f: \mathbb{R}^n \to \mathbb{R}$，在点 $\mathbf{x}$ 处沿方向 $\mathbf{v}$ 的方向导数定义为：

\begin{equation}
D_{\mathbf{v}} f(\mathbf{x}) = \lim_{t \to 0} \frac{f(\mathbf{x} + t\mathbf{v}) - f(\mathbf{x})}{t}
\end{equation}

\textbf{一维情况}：如果 $f: \mathbb{R} \to \mathbb{R}$，沿方向 $v$ 的方向导数为：

\begin{equation}
D_v f(x) = \lim_{t \to 0} \frac{f(x + tv) - f(x)}{t} = v \cdot f'(x)
\end{equation}

\section{极限过程的详细分析}

\subsection{步骤1：识别形式}

\textbf{原始表达式}：

\begin{equation}
\frac{f(x + \theta(y - x)) - f(x)}{\theta}
\end{equation}

\textbf{分析}：
\begin{itemize}
\item 这是函数 $f$ 在点 $x$ 处的增量比
\item 自变量的增量是：$\theta(y - x)$
\item 函数值的增量是：$f(x + \theta(y - x)) - f(x)$
\item 增量比是：$\frac{f(x + \theta(y - x)) - f(x)}{\theta}$
\end{itemize}

\subsection{步骤2：变量替换}

\textbf{设}：$h = \theta(y - x)$

\textbf{则}：
\begin{itemize}
\item 当 $\theta \to 0$ 时，$h \to 0$
\item $\theta = \frac{h}{y - x}$（假设 $y \neq x$）
\end{itemize}

\textbf{表达式变为}：

\begin{equation}
\frac{f(x + h) - f(x)}{h/(y - x)} = (y - x) \cdot \frac{f(x + h) - f(x)}{h}
</equation>

\subsection{步骤3：应用导数定义}

\textbf{当 $\theta \to 0$ 时}：

由于 $h = \theta(y - x)$，当 $\theta \to 0$ 时，$h \to 0$。

\textbf{根据导数定义}：

\begin{equation}
\lim_{h \to 0} \frac{f(x + h) - f(x)}{h} = f'(x)
</equation>

\textbf{因此}：

\begin{align}
\lim_{\theta \to 0} \frac{f(x + \theta(y - x)) - f(x)}{\theta} &= \lim_{h \to 0} (y - x) \cdot \frac{f(x + h) - f(x)}{h} \\
&= (y - x) \cdot \lim_{h \to 0} \frac{f(x + h) - f(x)}{h} \\
&= (y - x) \cdot f'(x) \\
&= f'(x)(y - x)
\end{align}

\section{更直观的理解}

\subsection{几何直观}

\textbf{几何意义}：
\begin{itemize}
\item $\frac{f(x + \theta(y - x)) - f(x)}{\theta}$ 是割线的斜率
\item 当 $\theta \to 0$ 时，割线趋于切线
\item 切线的斜率就是导数 $f'(x)$
\item 因此极限是 $f'(x)(y - x)$
\end{itemize}

\textbf{图示}：
\begin{itemize}
\item 点 $A = (x, f(x))$
\item 点 $B = (x + \theta(y - x), f(x + \theta(y - x)))$
\item 割线 $AB$ 的斜率：$\frac{f(x + \theta(y - x)) - f(x)}{\theta(y - x)}$
\item 当 $\theta \to 0$ 时，$B \to A$，割线趋于切线
\item 切线的斜率：$f'(x)$
\end{itemize}

\subsection{方向导数的视角}

\textbf{方向导数}：

表达式 $\frac{f(x + \theta(y - x)) - f(x)}{\theta}$ 可以理解为：

\begin{itemize}
\item 函数 $f$ 在点 $x$ 处沿方向 $(y - x)$ 的方向导数
\item 方向是：$\mathbf{v} = y - x$
\item 方向导数为：$D_{\mathbf{v}} f(x) = \lim_{\theta \to 0} \frac{f(x + \theta(y - x)) - f(x)}{\theta}$
\end{itemize}

\textbf{对于一元函数}：

如果 $f: \mathbb{R} \to \mathbb{R}$，则方向导数就是：

\begin{equation}
D_{y-x} f(x) = (y - x) \cdot f'(x) = f'(x)(y - x)
</equation>

\section{完整的证明过程}

\subsection{从凸性到一阶条件}

\textbf{已知}：$f$ 是凸函数，即对于任意 $x_1, x_2$ 和 $\theta \in [0, 1]$，有：

\begin{equation}
f(\theta x_1 + (1-\theta) x_2) \leq \theta f(x_1) + (1-\theta) f(x_2)
\end{equation}

\textbf{步骤1}：取 $x_1 = x$，$x_2 = y$，$\theta \in (0, 1]$，则：

\begin{equation}
f(x + \theta(y - x)) \leq (1-\theta) f(x) + \theta f(y)
</equation}

\textbf{步骤2}：整理不等式：

\begin{align}
f(x + \theta(y - x)) &\leq (1-\theta) f(x) + \theta f(y) \\
f(x + \theta(y - x)) &\leq f(x) - \theta f(x) + \theta f(y) \\
f(x + \theta(y - x)) - f(x) &\leq \theta (f(y) - f(x))
</equation>

\textbf{步骤3}：除以 $\theta > 0$：

\begin{equation}
\frac{f(x + \theta(y - x)) - f(x)}{\theta} \leq f(y) - f(x)
</equation>

\textbf{步骤4}：令 $\theta \to 0$，取极限：

\begin{align}
\lim_{\theta \to 0} \frac{f(x + \theta(y - x)) - f(x)}{\theta} &\leq \lim_{\theta \to 0} (f(y) - f(x)) \\
f'(x)(y - x) &\leq f(y) - f(x)
</equation}

\textbf{步骤5}：整理得到一阶条件：

\begin{equation}
f(y) \geq f(x) + f'(x)(y - x)
</equation}

\section{关键步骤的详细说明}

\subsection{为什么 $\lim_{\theta \to 0} \frac{f(x + \theta(y - x)) - f(x)}{\theta} = f'(x)(y - x)$？}

\textbf{方法1：直接应用导数定义}

设 $h = \theta(y - x)$，则：

\begin{align}
\lim_{\theta \to 0} \frac{f(x + \theta(y - x)) - f(x)}{\theta} &= \lim_{\theta \to 0} \frac{f(x + h) - f(x)}{\theta} \\
&= \lim_{\theta \to 0} \frac{f(x + h) - f(x)}{h/(y - x)} \\
&= \lim_{\theta \to 0} (y - x) \cdot \frac{f(x + h) - f(x)}{h}
</equation>

当 $\theta \to 0$ 时，$h = \theta(y - x) \to 0$，因此：

\begin{align}
&= (y - x) \cdot \lim_{h \to 0} \frac{f(x + h) - f(x)}{h} \\
&= (y - x) \cdot f'(x) \\
&= f'(x)(y - x)
</equation>

\textbf{方法2：使用链式法则}

考虑函数 $g(\theta) = f(x + \theta(y - x))$，则：

\begin{align}
g'(\theta) &= f'(x + \theta(y - x)) \cdot (y - x)
</equation>

因此：

\begin{align}
\lim_{\theta \to 0} \frac{f(x + \theta(y - x)) - f(x)}{\theta} &= \lim_{\theta \to 0} \frac{g(\theta) - g(0)}{\theta} \\
&= g'(0) \\
&= f'(x + 0 \cdot (y - x)) \cdot (y - x) \\
&= f'(x)(y - x)
</equation>

\section{具体例子}

\subsection{例子1：$f(x) = x^2$}

\textbf{验证极限过程}：

\begin{align}
\frac{f(x + \theta(y - x)) - f(x)}{\theta} &= \frac{(x + \theta(y - x))^2 - x^2}{\theta} \\
&= \frac{x^2 + 2x\theta(y - x) + \theta^2(y - x)^2 - x^2}{\theta} \\
&= \frac{2x\theta(y - x) + \theta^2(y - x)^2}{\theta} \\
&= 2x(y - x) + \theta(y - x)^2
</equation>

\textbf{令 $\theta \to 0$}：

\begin{align}
\lim_{\theta \to 0} \frac{f(x + \theta(y - x)) - f(x)}{\theta} &= \lim_{\theta \to 0} [2x(y - x) + \theta(y - x)^2] \\
&= 2x(y - x) \\
&= f'(x)(y - x)
</equation>

其中 $f'(x) = 2x$。✓

\subsection{例子2：$f(x) = e^x$}

\textbf{验证极限过程}：

\begin{align}
\frac{f(x + \theta(y - x)) - f(x)}{\theta} &= \frac{e^{x + \theta(y - x)} - e^x}{\theta} \\
&= \frac{e^x(e^{\theta(y - x)} - 1)}{\theta} \\
&= e^x \cdot \frac{e^{\theta(y - x)} - 1}{\theta}
</equation>

\textbf{使用极限}：$\lim_{t \to 0} \frac{e^t - 1}{t} = 1$

因此：

\begin{align}
\lim_{\theta \to 0} \frac{f(x + \theta(y - x)) - f(x)}{\theta} &= e^x \cdot \lim_{\theta \to 0} \frac{e^{\theta(y - x)} - 1}{\theta} \\
&= e^x \cdot (y - x) \cdot \lim_{\theta \to 0} \frac{e^{\theta(y - x)} - 1}{\theta(y - x)} \\
&= e^x \cdot (y - x) \cdot 1 \\
&= e^x(y - x) \\
&= f'(x)(y - x)
</equation>

其中 $f'(x) = e^x$。✓

\section{注意事项}

\subsection{需要 $f$ 可微}

\textbf{关键条件}：这个极限过程要求 $f$ 在点 $x$ 处可微。

如果 $f$ 在 $x$ 处不可微，则：
\begin{itemize}
\item 极限可能不存在
\item 或者极限存在但不等于 $f'(x)(y - x)$
\end{itemize}

\textbf{例子}：$f(x) = |x|$ 在 $x = 0$ 处不可微，因此不能直接应用这个极限过程。

\subsection{需要 $y \neq x$}

\textbf{注意}：在变量替换 $h = \theta(y - x)$ 时，我们假设 $y \neq x$。

如果 $y = x$，则：
\begin{itemize}
\item $\theta(y - x) = 0$
\item 表达式变为 $\frac{f(x) - f(x)}{\theta} = 0$
\item 但这种情况通常不重要（因为一阶条件在 $y = x$ 时自动满足）
\end{itemize}

\section{总结}

\subsection{极限过程}

\begin{enumerate}
\item \textbf{原始表达式}：$\frac{f(x + \theta(y - x)) - f(x)}{\theta}$

\item \textbf{变量替换}：设 $h = \theta(y - x)$，则当 $\theta \to 0$ 时，$h \to 0$

\item \textbf{应用导数定义}：
   \begin{equation}
   \lim_{h \to 0} \frac{f(x + h) - f(x)}{h} = f'(x)
   \end{equation}

\item \textbf{得到结果}：
   \begin{equation}
   \lim_{\theta \to 0} \frac{f(x + \theta(y - x)) - f(x)}{\theta} = f'(x)(y - x)
   \end{equation}
</enumerate>

\subsection{关键理解}

\begin{enumerate}
\item \textbf{这是导数的定义}：增量比的极限就是导数

\item \textbf{方向导数}：这是函数沿方向 $(y - x)$ 的方向导数

\item \textbf{几何意义}：割线斜率趋于切线斜率

\item \textbf{条件}：需要 $f$ 在 $x$ 处可微
</enumerate>

理解这个极限过程，是理解一阶条件证明的关键！

\end{document}

